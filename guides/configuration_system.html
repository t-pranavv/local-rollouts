
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuration system &#8212; PhyAGI</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=328381f7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guides/configuration_system';</script>
    <link rel="canonical" href="https://microsoft.github.io/phyagi/guides/configuration_system.html" />
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Command-Line Interface (CLI)" href="cli.html" />
    <link rel="prev" title="Logging" href="logging.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Sep 16, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">PhyAGI</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/build_docker.html">Build a Docker image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/quick_start.html">Quick start</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Configuration system</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_generation_infrastructure.html">Data generation infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="llama_cpp_and_gguf.html">Llama.cpp and GGUF</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tutorials/data_related.html">Data‑related</a></li>


<li class="toctree-l1"><a class="reference internal" href="../tutorials/model_architecture.html">Model architecture</a></li>

<li class="toctree-l1"><a class="reference internal" href="../tutorials/training.html">Training</a></li>

<li class="toctree-l1"><a class="reference internal" href="../tutorials/sft.html">Supervised Fine-Tuning (SFT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/rlhf.html">Reinforcement Learning from Human Feedback (RLHF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/evaluation.html">Evaluation</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/lr_schedulers.html">Learning rate schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/parameter_efficient.html">Parameter-Efficient Techniques (PEFT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/batch_tracking.html">Batch tracking</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Azure</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../azure/sc_alt.html">Log-In with SC-ALT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/pim.html">Elevate permissions with Privileged Identity Management (PIM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/singularity.html">Submiting jobs with Singularity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/storage_account.html">Azure Storage Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/virtual_machine.html">Azure Virtual Machine (VM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/container_registry.html">Azure Container Registry (ACR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/app_service.html">Azure App Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/kubernetes_service.html">Azure Kubernetes Service (AKS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/entra.html">Microsoft Entra</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../contributing/first_time_contributor.html">First time contributor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/tests.html">Tests</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../api/datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/trainers.html">Trainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/rl.html">Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/eval.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/cli.html">CLI</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/microsoft/phyagi" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/microsoft/phyagi/issues/new?title=Issue%20on%20page%20%2Fguides/configuration_system.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Configuration system</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Sections </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-keys">Configuration keys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-configuration">Dataset configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-configuration">Model configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#training-configuration-deepspeed">Training configuration (DeepSpeed)</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="configuration-system">
<h1>Configuration system<a class="headerlink" href="#configuration-system" title="Link to this heading">#</a></h1>
<p>PhyAGI utilizes <a class="reference external" href="https://omegaconf.readthedocs.io">OmegaConf</a> for managing configurations, offering a structured approach for defining parameters such as datasets, model architectures, and training routines. OmegaConf’s hierarchical configuration system supports variable interpolation and merging of configurations, which simplifies the management of various environments and setups.</p>
<p>The following sections offer an in-depth look at the <a class="reference external" href="https://github.com/microsoft/phyagi-sdk/blob/main/scripts/train/configs/ds_mixformer-sequential-350m.yaml">primary configuration keys</a> used in PhyAGI’s configuration system.</p>
<section id="configuration-keys">
<h2>Configuration keys<a class="headerlink" href="#configuration-keys" title="Link to this heading">#</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>These configuration keys define essential parameters that affect various aspects of the model training process.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_root</span></code>: Specifies the directory where the dataset is stored. This value can either be set by the <code class="docutils literal notranslate"><span class="pre">DATA_ROOT</span></code> environment variable or take the default value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_root</span></code>: Defines where output files (e.g., training checkpoints) are stored. This location can be overridden by the <code class="docutils literal notranslate"><span class="pre">OUTPUT_ROOT</span></code> environment variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_dir</span></code>: The directory within <code class="docutils literal notranslate"><span class="pre">output_root</span></code> for saving outputs specific to a model’s training.</p></li>
</ul>
</section>
<section id="dataset-configuration">
<h2>Dataset configuration<a class="headerlink" href="#dataset-configuration" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dataset</span></code> section plays a crucial role in specifying how data is managed during training. Below are the keys within this section:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cache_dir</span></code>: Directory where the processed and cached dataset is stored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">train_file</span></code>: Path to the <code class="docutils literal notranslate"><span class="pre">.npy</span></code> file containing the training data. If <code class="docutils literal notranslate"><span class="pre">cache_dir</span></code> is defined, it expects to find the training file at <code class="docutils literal notranslate"><span class="pre">&lt;cache_dir&gt;/train.npy</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validation_file</span></code>: Path to the <code class="docutils literal notranslate"><span class="pre">.npy</span></code> file containing the validation data, typically found at <code class="docutils literal notranslate"><span class="pre">&lt;cache_dir&gt;/validation.npy</span></code> when <code class="docutils literal notranslate"><span class="pre">cache_dir</span></code> is set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validation_split</span></code>: Used instead of <code class="docutils literal notranslate"><span class="pre">validation_file</span></code> to specify a validation dataset as an integer or float:</p>
<ul>
<li><p>Integer: The number of tokens from the training dataset to be used for validation.</p></li>
<li><p>Float: Fraction of the training data used for validation (between <code class="docutils literal notranslate"><span class="pre">0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">1.0</span></code>).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">tokenizer_file</span></code>: Path to the <code class="docutils literal notranslate"><span class="pre">.pkl</span></code> file containing the tokenizer configuration, typically located at <code class="docutils literal notranslate"><span class="pre">&lt;cache_dir&gt;/tokenizer.pkl</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seq_len</span></code>: Sequence length for the model’s input.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shift_labels</span></code>: Boolean flag that determines if the labels should be shifted, commonly used in next-token prediction tasks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weight</span></code>: Assigns a relative weight to the dataset, useful when multiple datasets are in use.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">label</span></code>: Defines the label to index the validation dataset’s logs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_concat</span></code>: Specifies how multiple datasets are concatenated during training.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval_dataset_concat</span></code>: Specifies how multiple datasets are concatenated during validation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_provider</span></code>: Defines the type of dataset provider, which determines how the samples are retrieved and formatted.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_collator</span></code>: Configuration for the dataset collator, responsible for batching and preparing data samples:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code>: The class of the collator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_token_ids</span></code>: List of token IDs to be ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_token_range</span></code>: Range of token IDs to be ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_index</span></code>: The index to be ignored by the loss function.</p></li>
</ul>
</li>
</ul>
</section>
<section id="model-configuration">
<h2>Model configuration<a class="headerlink" href="#model-configuration" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">model</span></code> section defines the architecture and parameters of the neural network:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">model_type</span></code>: Defines the architecture type (e.g., <code class="docutils literal notranslate"><span class="pre">mixformer-sequential</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vocab_size</span></code>: Total number of unique tokens in the model’s vocabulary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_positions</span></code>: Maximum number of positions (sequence length) supported by the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_embd</span></code>: Dimensionality of the embeddings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_layer</span></code>: Number of layers in the model (e.g., transformer blocks).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_head</span></code>: Number of attention heads in each transformer layer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotary_dim</span></code>: Dimensionality for rotary position embeddings used in attention mechanisms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">embd_pdrop</span></code>: Dropout probability for the embedding layer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resid_pdrop</span></code>: Dropout probability for residual connections in the model layers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activation_function</span></code>: Type of activation function (e.g., <code class="docutils literal notranslate"><span class="pre">gelu_new</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer_norm_epsilon</span></code>: Small constant added for stability in layer normalization.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initializer_range</span></code>: Range of values for initializing model parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pad_vocab_size_multiple</span></code>: Ensures that the vocabulary size is a multiple of this value for efficiency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_cache</span></code>: Whether to use cache for attention mechanisms (inference-only).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">embd_layer</span></code>: Specifies the embedding layer type, such as <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p></li>
</ul>
</section>
<section id="training-configuration-deepspeed">
<h2>Training configuration (DeepSpeed)<a class="headerlink" href="#training-configuration-deepspeed" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The configuration for training varies according to the trainer (Hugging Face, DeepSpeed, Lightning) and must be set correctly to ensure optimal performance during model training.</p>
</div>
<p>Training arguments include various settings that control the training process:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ds_config</span></code>: Configuration for DeepSpeed, including the following sub-keys:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">fp16</span></code>: Enables 16-bit floating-point precision.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimizer</span></code>: Defines the optimizer settings (e.g., <code class="docutils literal notranslate"><span class="pre">AdamW</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scheduler</span></code>: Configures the learning rate scheduler.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zero_optimization</span></code>: Configures ZeRO optimizer stages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gradient_clipping</span></code>: Defines the maximum norm for gradient clipping.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">do_eval</span></code>: Indicates whether to run evaluation on the validation set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_train_epochs</span></code>: The total number of epochs for training.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_steps</span></code>: Maximum number of training steps.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logging_steps</span></code>: Frequency (in steps) at which training metrics are logged.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save_steps</span></code>: Defines how often to save model checkpoints.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save_final_checkpoint</span></code>: Whether to save the final model checkpoint after training.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seed</span></code>: Sets the random seed for reproducibility.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mlflow</span></code>: Enables logging to MLflow for tracking training metrics.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wandb</span></code>: Integrates with Weights &amp; Biases for tracking experiments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gradient_clipping</span></code>: Controls gradient clipping.</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="logging.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Logging</p>
      </div>
    </a>
    <a class="right-next"
       href="cli.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Command-Line Interface (CLI)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Sections
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-keys">Configuration keys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-configuration">Dataset configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-configuration">Model configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#training-configuration-deepspeed">Training configuration (DeepSpeed)</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Microsoft
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Sep 16, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>